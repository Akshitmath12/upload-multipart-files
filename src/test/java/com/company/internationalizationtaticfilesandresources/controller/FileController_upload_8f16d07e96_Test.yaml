# Test generated by RoostGPT for test test2 using AI Type Open AI and AI Model gpt-4

config:
  target: "http://example.com/api"
  phases:
    - duration: 60
      arrivalRate: 20
  payload:
    path: "data.csv"
    fields: 
      - "file"
scenarios:
  - name: "Successful API request"
    flow:
      - post:
          url: "/upload"
          formData:
            file: "{{ file }}"
          capture:
            json: "$.message"
            as: "message"
      - think: 5
      - assert:
        - statusCode: 200
        - bodyContains:
          - "Upload successful"
        - equals:
          - "message": "File uploaded successfully"

  - name: "API request with validation failure"
    flow:
      - post:
          url: "/upload"
          formData:
            file: ""
          capture:
            json: "$.message"
            as: "message"
      - think: 5
      - assert:
        - statusCode: 400
        - bodyContains:
          - "Validation failed"
        - equals:
          - "message": "File is required"

  - name: "API request with edge case"
    flow:
      - post:
          url: "/upload"
          formData:
            file: "{{ file }}"
          capture:
            json: "$.message"
            as: "message"
      - think: 5
      - assert:
        - statusCode: 200
        - bodyContains:
          - "Upload successful"
        - equals:
          - "message": "File uploaded successfully"
